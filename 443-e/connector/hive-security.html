

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#0672CB">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', ' UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Hive connector security configuration &#8212; Dell Data Analytics Engine</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/dell.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Object storage file formats" href="object-storage-file-formats.html" />
    <link rel="prev" title="Hive connector with IBM Cloud Object Storage" href="hive-cos.html" />

  
   

<meta name="robots" content="none">
<meta name="googlebot" content="none">
<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/connector/hive-security.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#connector/hive-security" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <span
          title="Dell Data Analytics Engine"
          class="md-header-nav__button md-logo"
          style="cursor: default"
        >
          
          <img
            src="../_static/dell.png"
            alt="Dell Data Analytics Engine 443-e LTS logo"
          />
          
        </span>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label
          class="md-icon md-icon--menu md-header-nav__button"
          for="__drawer"
        ></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div
          class="md-flex__ellipsis md-header-nav__title"
          data-md-component="title"
        >
          Hive connector security configuration
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label
          class="md-icon md-icon--search md-header-nav__button"
          for="__search"
        ></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
       
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../object-storage-connectors.html" class="md-tabs__link">Object storage connectors</a></li>
          <li class="md-tabs__item"><a href="starburst-hive.html" class="md-tabs__link">Starburst Hive connector</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Dell Data Analytics Engine" class="md-nav__button md-logo">
      
        <img src="../_static/dell.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Dell Data Analytics Engine">Dell Data Analytics Engine 443-e LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../routines.html">SQL routines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../object-storage-connectors.html">Object storage connectors</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../object-storage-connectors.html#id1">Object storage connectors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="starburst-delta-lake.html">Delta Lake connector</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="starburst-hive.html">Hive connector</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="metastores.html">Metastores</a></li>
<li class="toctree-l4"><a class="reference internal" href="hive-s3.html">Hive connector with Amazon S3</a></li>
<li class="toctree-l4"><a class="reference internal" href="hive-azure.html">Hive connector with Azure Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="hive-gcs-tutorial.html">Google Cloud Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="hive-cos.html">Hive connector with IBM Cloud Object Storage</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Hive connector security configuration</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="#requirements">Requirements</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#kerberos">Kerberos</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#keytab-files">Keytab files</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#impersonation-in-hadoop">Impersonation in Hadoop</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#hdfs-authentication">HDFS authentication</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#configuration-examples">Configuration examples</a><ul>
<li class="toctree-l8"><a class="reference internal" href="#default-none-authentication-without-impersonation">Default <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication without impersonation</a></li>
<li class="toctree-l8"><a class="reference internal" href="#none-authentication-with-impersonation"><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with impersonation</a></li>
<li class="toctree-l8"><a class="reference internal" href="#kerberos-authentication-without-impersonation"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication without impersonation</a></li>
<li class="toctree-l8"><a class="reference internal" href="#kerberos-authentication-with-impersonation"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with impersonation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="object-storage-file-formats.html">Object storage file formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#extensions">Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#sql-support">SQL support</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#table-functions">Table functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#performance">Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#security">Security</a></li>
<li class="toctree-l4"><a class="reference internal" href="starburst-hive.html#id3">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hudi.html">Hudi connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="starburst-iceberg.html">Iceberg connector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../object-storage-connectors.html#object-storage-extensions">Object storage extensions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../k8s.html">Deploy with Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Manual installation and license</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#topic-areas">Topic areas</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#connector-hive-security--page-root" class="md-nav__link">Hive connector security configuration</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a>
        </li>
        <li class="md-nav__item"><a href="#requirements" class="md-nav__link">Requirements</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#kerberos" class="md-nav__link">Kerberos</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#keytab-files" class="md-nav__link">Keytab files</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#impersonation-in-hadoop" class="md-nav__link">Impersonation in Hadoop</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#authentication" class="md-nav__link">Authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#hdfs-authentication" class="md-nav__link">HDFS authentication</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#configuration-examples" class="md-nav__link">Configuration examples</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#default-none-authentication-without-impersonation" class="md-nav__link">Default <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication without impersonation</a>
        </li>
        <li class="md-nav__item"><a href="#none-authentication-with-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with impersonation</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-authentication-without-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication without impersonation</a>
        </li>
        <li class="md-nav__item"><a href="#kerberos-authentication-with-impersonation" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with impersonation</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="hive-connector-security-configuration">
<h1 id="connector-hive-security--page-root">Hive connector security configuration<a class="headerlink" href="#connector-hive-security--page-root" title="Permalink to this heading">#</a></h1>
<section id="overview">
<span id="hive-security-impersonation"></span><h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>The Hive connector supports both authentication and authorization.</p>
<p>Trino can impersonate the end user who is running a query. In the case of a
user running a query from the command line interface, the end user is the
username associated with the Trino CLI process or argument to the optional
<code class="docutils literal notranslate"><span class="pre">--user</span></code> option.</p>
<p>Authentication can be configured with or without user impersonation on
Kerberized Hadoop clusters.</p>
</section>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>End user authentication limited to Kerberized Hadoop clusters. Authentication
user impersonation is available for both Kerberized and non-Kerberized clusters.</p>
<p>You must ensure that you meet the Kerberos, user impersonation and keytab
requirements described in this section that apply to your configuration.</p>
<section id="kerberos">
<span id="hive-security-kerberos-support"></span><h3 id="kerberos">Kerberos<a class="headerlink" href="#kerberos" title="Permalink to this heading">#</a></h3>
<p>In order to use the Hive connector with a Hadoop cluster that uses <code class="docutils literal notranslate"><span class="pre">kerberos</span></code>
authentication, you must configure the connector to work with two services on
the Hadoop cluster:</p>
<ul class="simple">
<li><p>The Hive metastore Thrift service</p></li>
<li><p>The Hadoop Distributed File System (HDFS)</p></li>
</ul>
<p>Access to these services by the Hive connector is configured in the properties
file that contains the general Hive connector configuration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your <code class="docutils literal notranslate"><span class="pre">krb5.conf</span></code> location is different from <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> you
must set it explicitly using the <code class="docutils literal notranslate"><span class="pre">java.security.krb5.conf</span></code> JVM property
in <code class="docutils literal notranslate"><span class="pre">jvm.config</span></code> file.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">-Djava.security.krb5.conf=/example/path/krb5.conf</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Access to the Trino coordinator must be secured e.g., using Kerberos or
password authentication, when using Kerberos authentication to Hadoop services.
Failure to secure access to the Trino coordinator could result in unauthorized
access to sensitive data on the Hadoop cluster. Refer to <a class="reference internal" href="../security.html"><span class="doc">Security</span></a> for
further information.</p>
<p>See <a class="reference internal" href="../security/kerberos.html"><span class="doc">Kerberos authentication</span></a> for information on setting up Kerberos authentication.</p>
</div>
<section id="keytab-files">
<span id="hive-security-additional-keytab"></span><h4 id="keytab-files">Keytab files<a class="headerlink" href="#keytab-files" title="Permalink to this heading">#</a></h4>
<p>Keytab files contain encryption keys that are used to authenticate principals
to the Kerberos <abbr title="Key Distribution Center">KDC</abbr>. These encryption keys
must be stored securely; you must take the same precautions to protect them
that you take to protect ssh private keys.</p>
<p>In particular, access to keytab files must be limited to only the accounts
that must use them to authenticate. In practice, this is the user that
the Trino process runs as. The ownership and permissions on keytab files
must be set to prevent other users from reading or modifying the files.</p>
<p>Keytab files must be distributed to every node running Trino. Under common
deployment situations, the Hive connector configuration is the same on all
nodes. This means that the keytab needs to be in the same location on every
node.</p>
<p>You must ensure that the keytab files have the correct permissions on every
node after distributing them.</p>
</section>
</section>
<section id="impersonation-in-hadoop">
<span id="configuring-hadoop-impersonation"></span><h3 id="impersonation-in-hadoop">Impersonation in Hadoop<a class="headerlink" href="#impersonation-in-hadoop" title="Permalink to this heading">#</a></h3>
<p>In order to use impersonation, the Hadoop cluster must be
configured to allow the user or principal that Trino is running as to
impersonate the users who log in to Trino. Impersonation in Hadoop is
configured in the file <code class="file docutils literal notranslate"><span class="pre">core-site.xml</span></code>. A complete description of the
configuration options can be found in the <a class="reference external" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/Superusers.html#Configurations">Hadoop documentation</a>.</p>
</section>
</section>
<section id="authentication">
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permalink to this heading">#</a></h2>
<p>The default security configuration of the <a class="reference internal" href="hive.html"><span class="doc">Hive connector</span></a> does not use
authentication when connecting to a Hadoop cluster. All queries are executed as
the user who runs the Trino process, regardless of which user submits the
query.</p>
<p>The Hive connector provides additional security options to support Hadoop
clusters that have been configured to use <a class="reference internal" href="#hive-security-kerberos-support"><span class="std std-ref">Kerberos</span></a>.</p>
<p>When accessing <abbr title="Hadoop Distributed File System">HDFS</abbr>, Trino can
<a class="reference internal" href="#hive-security-impersonation"><span class="std std-ref">impersonate</span></a> the end user who is running the
query. This can be used with HDFS permissions and <abbr title="Access Control Lists">ACLs</abbr> to provide additional security for data.</p>
<section id="hdfs-authentication">
<h3 id="hdfs-authentication">HDFS authentication<a class="headerlink" href="#hdfs-authentication" title="Permalink to this heading">#</a></h3>
<p>In a Kerberized Hadoop cluster, Trino authenticates to HDFS using Kerberos.
Kerberos authentication for HDFS is configured in the connector’s properties
file using the following optional properties:</p>
<table id="id1">
<caption><span class="caption-text">HDFS authentication properties</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 55%"/>
<col style="width: 15%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property value</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code></p></td>
<td><p>HDFS authentication type; one of <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>. When using the
default value of <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, Kerberos authentication is disabled, and no other
properties must be configured.</p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, the Hive connector authenticates to HDFS using
Kerberos.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code></p></td>
<td><p>Enable HDFS end-user impersonation. Impersonating the end user can provide
additional security when accessing HDFS if HDFS permissions or ACLs are
used.</p>
<p>HDFS Permissions and ACLs are explained in the <a class="reference external" href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html">HDFS Permissions
Guide</a>.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code></p></td>
<td><p>The Kerberos principal Trino uses when connecting to HDFS.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">trino-hdfs-superuser/trino-server-node@EXAMPLE.COM</span></code> or
<code class="docutils literal notranslate"><span class="pre">trino-hdfs-superuser/_HOST@EXAMPLE.COM</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">_HOST</span></code> placeholder can be used in this property value. When connecting
to HDFS, the Hive connector substitutes in the hostname of the <strong>worker</strong>
node Trino is running on. This is useful if each worker node has its own
Kerberos principal.</p>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code></p></td>
<td><p>The path to the keytab file that contains a key for the principal specified
by <code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code>. This file must be readable by the operating
system user running Trino.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.wire-encryption.enabled</span></code></p></td>
<td><p>Enable HDFS wire encryption. In a Kerberized Hadoop cluster that uses HDFS
wire encryption, this must be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable Trino to access HDFS.
Note that using wire encryption may impact query execution performance.</p></td>
<td></td>
</tr>
</tbody>
</table>
<section id="configuration-examples">
<h4 id="configuration-examples">Configuration examples<a class="headerlink" href="#configuration-examples" title="Permalink to this heading">#</a></h4>
<p>The following sections describe the configuration properties and values needed
for the various authentication configurations with HDFS and the Hive connector.</p>
<section id="default-none-authentication-without-impersonation">
<span id="hive-security-simple"></span><h5 id="default-none-authentication-without-impersonation">Default <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication without impersonation<a class="headerlink" href="#default-none-authentication-without-impersonation" title="Permalink to this heading">#</a></h5>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=NONE
</pre></div>
</div>
<p>The default authentication type for HDFS is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>. When the authentication
type is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, Trino connects to HDFS using Hadoop’s simple authentication
mechanism. Kerberos is not used.</p>
</section>
<section id="none-authentication-with-impersonation">
<span id="hive-security-simple-impersonation"></span><h5 id="none-authentication-with-impersonation"><code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with impersonation<a class="headerlink" href="#none-authentication-with-impersonation" title="Permalink to this heading">#</a></h5>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=NONE
hive.hdfs.impersonation.enabled=true
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">NONE</span></code> authentication with impersonation, Trino impersonates
the user who is running the query when accessing HDFS. The user Trino is
running as must be allowed to impersonate this user, as discussed in the
section <a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>. Kerberos is not used.</p>
</section>
<section id="kerberos-authentication-without-impersonation">
<span id="hive-security-kerberos"></span><h5 id="kerberos-authentication-without-impersonation"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication without impersonation<a class="headerlink" href="#kerberos-authentication-without-impersonation" title="Permalink to this heading">#</a></h5>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=KERBEROS
hive.hdfs.trino.principal=hdfs@EXAMPLE.COM
hive.hdfs.trino.keytab=/etc/trino/hdfs.keytab
</pre></div>
</div>
<p>When the authentication type is <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>, Trino accesses HDFS as the
principal specified by the <code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code> property. Trino
authenticates this principal using the keytab specified by the
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code> keytab.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Trino.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>
</section>
<section id="kerberos-authentication-with-impersonation">
<span id="hive-security-kerberos-impersonation"></span><h5 id="kerberos-authentication-with-impersonation"><code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with impersonation<a class="headerlink" href="#kerberos-authentication-with-impersonation" title="Permalink to this heading">#</a></h5>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hive.hdfs.authentication.type=KERBEROS
hive.hdfs.impersonation.enabled=true
hive.hdfs.trino.principal=trino@EXAMPLE.COM
hive.hdfs.trino.keytab=/etc/trino/hdfs.keytab
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code> authentication with impersonation, Trino impersonates
the user who is running the query when accessing HDFS. The principal
specified by the <code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code> property must be allowed to
impersonate the current Trino user, as discussed in the section
<a class="reference internal" href="#configuring-hadoop-impersonation"><span class="std std-ref">Impersonation in Hadoop</span></a>. Trino authenticates
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.principal</span></code> using the keytab specified by
<code class="docutils literal notranslate"><span class="pre">hive.hdfs.trino.keytab</span></code>.</p>
<p>Keytab files must be distributed to every node in the cluster that runs Trino.</p>
<p><a class="reference internal" href="#hive-security-additional-keytab"><span class="std std-ref">Additional Information About Keytab Files.</span></a></p>
</section>
</section>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="hive-cos.html" title="Hive connector with IBM Cloud Object Storage"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Hive connector with IBM Cloud Object Storage </span>
              </div>
            </a>
          
          
            <a href="object-storage-file-formats.html" title="Object storage file formats"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Object storage file formats </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>