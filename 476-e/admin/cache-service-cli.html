

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#0672CB">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  <script>
      window.ga = window.ga || function () {
          (ga.q = ga.q || []).push(arguments)
      };
      ga.l = +new Date;
      ga('create', 'UA-114610397-1', 'auto');
      ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  
  
    <title>Cache service CLI &#8212; Dell Data Analytics Engine</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../_static/algolia.css" />
    <link rel="stylesheet" type="text/css" href="../_static/dell.css" />
    <link rel="stylesheet" type="text/css" href="../_static/search.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/main.js"></script>
    <script src="../_static/algolia.js"></script>
    <script src="../_static/searchbox.js"></script>
    <script src="../_static/searchresults.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Atlas integration" href="atlas-integration.html" />
    <link rel="prev" title="Cache service" href="cache-service.html" />

  
   

<meta name="robots" content="none">
<meta name="googlebot" content="none">
<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">


<!-- Always link to the latest version, as canonical -->
<link rel="canonical" href="https://docs.starburst.io/latest/admin/cache-service-cli.html">

  </head>
  <body dir=ltr
        data-md-color-primary= data-md-color-accent=>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#admin/cache-service-cli" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <span
          title="Dell Data Analytics Engine"
          class="md-header-nav__button md-logo"
          style="cursor: default"
        >
          
          <img
            src="../_static/dell.png"
            alt="Dell Data Analytics Engine 476-e.5 LTS logo"
          />
          
        </span>
      </div>
      <span class="header-divider"></span>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label
          class="md-icon md-icon--menu md-header-nav__button"
          for="__drawer"
        ></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div
          class="md-flex__ellipsis md-header-nav__title"
          data-md-component="title"
        >
          Cache service CLI
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label
          class="md-icon md-icon--search md-header-nav__button"
          for="__search"
        ></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="GET" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
       
  
  <div class="md-flex__cell md-flex__cell--shrink dropdown">
    <button class="dropdownbutton">Choose version</button>
    <div class="dropdown-content md-hero">
          <a title="Latest LTS (474-e)" href="/474-e/">Latest LTS (474-e)</a>
      
          <a title="476-e LTS" href="/476-e/">476-e LTS</a>
      
          <a title="468-e LTS" href="/468-e/">468-e LTS</a>
      
          <a title="462-e LTS" href="/462-e/">462-e LTS</a>
      
    </div>
  </div>
  

    </div>
  </nav>
</header>


  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../admin.html" class="md-tabs__link">Performance, logging, and governance features</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Dell Data Analytics Engine" class="md-nav__button md-logo">
      
        <img src="../_static/dell.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Dell Data Analytics Engine">Dell Data Analytics Engine 476-e.5 LTS</a>
  </label>
  
  
  <p class="caption" role="heading"><span class="caption-text">Get started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get-started/starburst-enterprise.html">What is Starburst Enterprise?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learn/index.html">Learn Starburst Enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.starburst.io/support.html">Get support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For all users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/sep-ui.html">Starburst Enterprise web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-ai/index.html">Starburst AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client.html">Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-products.html">Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../insights.html">Insights</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Dell Data Processing Engine users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/release-notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/job-submission.html">Job submission</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/resource-pools.html">Resource pools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/access-control.html">Access control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/object-storage-governance.html">Object storage governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/cli.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dell-data-processing-engine/api.html">Dell Data Processing Engine API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Use SQL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language.html">SQL language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sql.html">SQL statement syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions and operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../udf.html">User-defined functions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For data engineers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../catalogs.html">Define catalogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/materialized-views.html">Materialized views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/data-maintenance.html">Data maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizer.html">Query optimizer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Connect to data sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connector.html">Connector overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage-connectors.html">Object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-object-storage-connectors.html">Non-object storage connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-connectors.html">Community-supported connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connector/starburst-connectors.html">Starburst connectors feature matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/cost-and-performance/index.html">Monitor and manage cost and performance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For platform administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../admin-topics.html">Administration topics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../admin.html">Performance, logging, and governance features</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../admin.html#feature-topic-areas">Feature topic areas</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../admin.html#properties-reference">Properties reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin.html#performance-related-properties-and-features">Performance-related properties and features</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../admin.html#starburst-cached-views">Starburst Cached Views</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="starburst-cached-views.html">Starburst Cached Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="table-scan-redirection.html">Table scan redirection</a></li>
<li class="toctree-l4"><a class="reference internal" href="cache-service.html">Cache service</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Cache service CLI</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l5"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l5"><a class="reference internal" href="#output-formats">Output formats</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#commands">Commands</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#current-redirection">Current redirection</a></li>
<li class="toctree-l6"><a class="reference internal" href="#list-redirections">List redirections</a></li>
<li class="toctree-l6"><a class="reference internal" href="#list-imports">List imports</a></li>
<li class="toctree-l6"><a class="reference internal" href="#add-redirection">Add redirection</a></li>
<li class="toctree-l6"><a class="reference internal" href="#incremental-import">Incremental import</a></li>
<li class="toctree-l6"><a class="reference internal" href="#expire-redirections">Expire redirections</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin.html#data-governance">Data governance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin.html#platform-features">Platform features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin.html#other-resources">Other resources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starburst-rest-api.html">Starburst Enterprise REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data engineering</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data-engineering/index.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SEP deployment mechanisms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license-requirements.html">Starburst Enterprise license</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Manual installation and license</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Trino developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Version-specific notices and information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#topic-areas">Topic areas</a></li>
</ul>
  
  
</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
  <div class="local-toc">
    <strong>Contents</strong>
    <ul>
<li><a class="reference internal" href="#">Cache service CLI</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#output-formats">Output formats</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#commands">Commands</a><ul>
<li><a class="reference internal" href="#current-redirection">Current redirection</a></li>
<li><a class="reference internal" href="#list-redirections">List redirections</a></li>
<li><a class="reference internal" href="#list-imports">List imports</a></li>
<li><a class="reference internal" href="#add-redirection">Add redirection</a></li>
<li><a class="reference internal" href="#incremental-import">Incremental import</a></li>
<li><a class="reference internal" href="#expire-redirections">Expire redirections</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="cache-service-cli">
<h1 id="admin-cache-service-cli--page-root">Cache service CLI<a class="headerlink" href="#admin-cache-service-cli--page-root" title="Permalink to this heading">#</a></h1>
<p>The Dell Data Analytics Engine, powered by Starburst Enterprise platform (SEP) cache service command line interface (CLI) provides a
terminal-based interface for listing and configuring redirections managed by the
<a class="reference internal" href="cache-service.html"><span class="doc">cache service</span></a>.</p>
<section id="requirements">
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<p>The cache service CLI requires a Java virtual machine available on the path. It
can be used with Java version 17 and higher. It is a self-executing JAR file,
which means it acts like a normal UNIX executable.</p>
</section>
<section id="installation">
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>To download the cache service CLI file, contact Starburst Support</p></li>
<li><p>Support provides access to a JAR file named <code class="docutils literal notranslate"><span class="pre">starburst-cache-cli-nnn.jar</span></code>
where <em>nnn</em> is the version number.</p></li>
<li><p>Rename this file to <code class="docutils literal notranslate"><span class="pre">cache-cli</span></code></p></li>
<li><p>Make it executable with <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">cache-cli</span></code></p></li>
<li><p>Place it in a directory on the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, such as <code class="docutils literal notranslate"><span class="pre">~/bin</span></code>, or
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --server localhost:8180 --source=mysql.test.orders
</pre></div>
</div>
<p>Run the CLI with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option to see the available options.</p>
</section>
<section id="authentication">
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permalink to this heading">#</a></h2>
<p>You can override your username with the <code class="docutils literal notranslate"><span class="pre">--user</span></code> option. It defaults to your
operating system username. If your cache service requires password
authentication, use the <code class="docutils literal notranslate"><span class="pre">--password</span></code> option to have the CLI prompt for a
password. You can set the <code class="docutils literal notranslate"><span class="pre">CACHE_SERVICE_PASSWORD</span></code> environment variable with
the password value to avoid the prompt.</p>
<p>HTTP client properties, such as keystore and truststore, can be specified
through a configuration file that can be passed to the CLI with the
<code class="docutils literal notranslate"><span class="pre">--properties</span></code> option.</p>
<p>For example, when the cache service is running in HTTPS mode, the CLI can be
configured to connect to it by adding the below properties to a file and
providing it’s path in the <code class="docutils literal notranslate"><span class="pre">--properties</span></code> option to the CLI.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><span class="na">http-client.trust-store-path</span><span class="o">=</span><span class="s">etc/localhost.truststore</span>
<span class="na">http-client.trust-store-password</span><span class="o">=</span><span class="s">changeit</span>
<span class="na">http-client.https.hostname-verification</span><span class="o">=</span><span class="s">false</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --server https://localhost:8543 --source=mysql.test.orders --properties=etc/http-client-config.properties --user test --password
</pre></div>
</div>
</section>
<section id="output-formats">
<h2 id="output-formats">Output formats<a class="headerlink" href="#output-formats" title="Permalink to this heading">#</a></h2>
<p>The cache service CLI provides the option <code class="docutils literal notranslate"><span class="pre">--output-format</span></code> to control how
the output is displayed when running in non-interactive mode. The available
options shown in the following table must be entered in uppercase.
The default value is <code class="docutils literal notranslate"><span class="pre">ALIGNED</span></code>.</p>
<table id="id1">
<caption><span class="caption-text">Output format options</span><a class="headerlink" href="#id1" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 25%"/>
<col style="width: 75%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">JSON</span></code></p></td>
<td><p>Output rows emitted as JSON objects with name-value pairs.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ALIGNED</span></code></p></td>
<td><p>Output emitted as an ASCII character table with values.</p></td>
</tr>
</tbody>
</table>
<section id="examples">
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h3>
<p>Consider the following command run as shown, or with <code class="docutils literal notranslate"><span class="pre">--output-format</span> <span class="pre">ALIGNED</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --source=mysql.test.nation_tmp
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | status | target_catalog | target_schema |                  target_table                   |       create_time        |  ttl  | grace_period | columns | partition_columns | bucket_columns | bucket_count | sort_columns | incremental_column | predicate | delete_predicate | delete_error_message
----+--------+----------------+---------------+-------------------------------------------------+--------------------------+-------+--------------+---------+-------------------+----------------+--------------+--------------+--------------------+-----------+------------------+----------------------
 1  | ACTIVE | hive           | cache         | nation_tmp_45d616e8_d662_447f_acc2_db2ddb19e14f | 2021-04-12T05:28:54.357Z | 1.50h | 15.00m       | *       | regionkey         |                |              |              |                    |           |                  |
(1 row)
</pre></div>
</div>
<p>The output with <code class="docutils literal notranslate"><span class="pre">--output-format</span> <span class="pre">JSON</span></code> is:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="nt">"target_catalog"</span><span class="p">:</span><span class="s2">"hive"</span><span class="p">,</span><span class="nt">"target_schema"</span><span class="p">:</span><span class="s2">"cache"</span><span class="p">,</span><span class="nt">"target_table"</span><span class="p">:</span><span class="s2">"nation_tmp_45d616e8_d662_447f_acc2_db2ddb19e14f"</span><span class="p">,</span><span class="nt">"create_time"</span><span class="p">:</span><span class="s2">"2021-04-12T05:28:54.357Z"</span><span class="p">,</span><span class="nt">"ttl"</span><span class="p">:</span><span class="s2">"1.50h"</span><span class="p">,</span><span class="nt">"grace_period"</span><span class="p">:</span><span class="s2">"15.00m"</span><span class="p">,</span><span class="nt">"columns"</span><span class="p">:</span><span class="s2">"*"</span><span class="p">,</span><span class="nt">"partition_columns"</span><span class="p">:</span><span class="s2">"regionkey"</span><span class="p">,</span><span class="nt">"bucket_columns"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"bucket_count"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"sort_columns"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"incremental_column"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"predicate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"delete_predicate"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nt">"delete_error_message"</span><span class="p">:</span><span class="s2">""</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="commands">
<h2 id="commands">Commands<a class="headerlink" href="#commands" title="Permalink to this heading">#</a></h2>
<p>The cache service CLI implements the following sub-commands for viewing
and adding cached tables.</p>
<section id="current-redirection">
<h3 id="current-redirection">Current redirection<a class="headerlink" href="#current-redirection" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">current_redirection</span></code> command shows whether the specified source table has
a valid redirection. The source table is provided through the <code class="docutils literal notranslate"><span class="pre">--source</span></code>
option in the format <code class="docutils literal notranslate"><span class="pre">&lt;catalog&gt;.&lt;schema&gt;.&lt;table&gt;</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli current_redirection --source=mysql.test.nation_tmp
</pre></div>
</div>
<p>The output either shows a valid redirection or <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">rows</span></code> as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | status | target_catalog | target_schema |                  target_table                   |       create_time        |  ttl  | grace_period | columns | partition_columns | bucket_columns | bucket_count | sort_columns | incremental_column | predicate | delete_predicate | delete_error_message
----+--------+----------------+---------------+-------------------------------------------------+--------------------------+-------+--------------+---------+-------------------+----------------+--------------+--------------+--------------------+-----------+------------------+----------------------
 1  | ACTIVE | hive           | cache         | nation_tmp_45d616e8_d662_447f_acc2_db2ddb19e14f | 2021-04-12T05:28:54.357Z | 1.50h | 15.00m       | *       | regionkey         |                |              |              |                    |           |                  |
(1 row)

 id | status | target_catalog | target_schema | target_table | create_time | ttl | grace_period | columns | partition_columns | bucket_columns | bucket_count | sort_columns | incremental_column | predicate | delete_predicate | delete_error_message
----+--------+----------------+---------------+--------------+-------------+-----+--------------+---------+-------------------+----------------+--------------+--------------+--------------------+-----------+------------------+----------------------
(0 rows)
</pre></div>
</div>
</section>
<section id="list-redirections">
<h3 id="list-redirections">List redirections<a class="headerlink" href="#list-redirections" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">list_redirections</span></code> command shows the list of cached tables for the
specified source table. The source table is provided through the <code class="docutils literal notranslate"><span class="pre">--source</span></code>
option in the format <code class="docutils literal notranslate"><span class="pre">&lt;catalog&gt;.&lt;schema&gt;.&lt;table&gt;</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli list_redirections --source=mysql.test.nation_tmp
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | status  | target_catalog | target_schema |                  target_table                   |       create_time        |  ttl  | grace_period | columns | partition_columns | bucket_columns | bucket_count | sort_columns | incremental_column | predicate | delete_predicate | delete_error_message
----+---------+----------------+---------------+-------------------------------------------------+--------------------------+-------+--------------+---------+-------------------+----------------+--------------+--------------+--------------------+-----------+------------------+----------------------
 1  | EXPIRED | hive           | cache         | nation_tmp_86bd8195_d0f0_497d_b0f4_b8562e4d2256 | 2021-03-10T15:21:36.142Z | 7.67m | 15.00m       | foo     | regionkey         |                |              |              |                    |           |                  |
 2  | EXPIRED | hive           | cache         | nation_tmp_1eb57b45_20e5_4940_9724_c0f781cd539a | 2021-03-10T15:26:36.142Z | 7.67m | 15.00m       | *       | regionkey         |                |              |              |                    |           |                  |
 3  | ACTIVE  | hive           | cache         | nation_tmp_b869f396_5798_4f06_b943_0f6ff5b40855 | 2021-03-10T15:31:36.142Z | 7.67m | 15.00m       | *       | regionkey         |                |              |              |                    |           |                  |
 4  | ACTIVE  | hive           | cache         | nation_tmp_8e10ccca_fdc8_4a47_ac7a_48da2012cf30 | 2021-03-10T15:36:36.142Z | 7.67m | 15.00m       | *       | regionkey         |                |              |              |                    |           |                  |
(4 rows)
</pre></div>
</div>
</section>
<section id="list-imports">
<h3 id="list-imports">List imports<a class="headerlink" href="#list-imports" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">list_imports</span></code> command shows the list of import jobs for the redirection
corresponding to a given identifier. The column <code class="docutils literal notranslate"><span class="pre">id</span></code> from the output of
<code class="docutils literal notranslate"><span class="pre">list_redirections</span></code> or <code class="docutils literal notranslate"><span class="pre">current_redirection</span></code> commands can be used to
identify a redirection for expiry. The column <code class="docutils literal notranslate"><span class="pre">error_message</span></code> shows the
reasons for any failure encountered while trying to create or populate the
cached table:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli list_imports --id=1
</pre></div>
</div>
<p>The output for an bulk loaded cached table is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | redirection_id |      scheduled_time      | max_duration |        start_time        | finish_time | row_count |                                                                                                                                         error_message
----+----------------+--------------------------+--------------+--------------------------+-------------+-----------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 4  | 1              | 2021-03-10T15:50:45.432Z | 30.00m       | 2021-03-10T15:50:45.537Z |             |           | java.sql.SQLException: Query failed (#20210310_155047_01264_cbv62): line 1:83: Column 'foo' cannot be resolved [statement:"CREATE TABLE hive.cache.nation_tmp_ba1b66f2_3be8_42dc_a955_e42a6db3ac7b  AS SELECT foo FROM mysql.test.nation_tmp", arguments:{positional:{}, named:{}, finder:[]}]
(1 row)
</pre></div>
</div>
<p>The output for an incrementally cached table is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> id | redirection_id |      scheduled_time      | max_duration |        start_time        |       finish_time        | row_count | error_message
----+----------------+--------------------------+--------------+--------------------------+--------------------------+-----------+---------------
 1  | 1              | 2021-03-10T14:31:45.257Z | 1.06m        | 2021-03-10T14:31:49.124Z | 2021-03-10T14:31:50.909Z | 10        |
 2  | 1              | 2021-03-10T14:33:45.257Z | 1.06m        | 2021-03-10T14:33:48.876Z | 2021-03-10T14:33:51.692Z | 10        |
 3  | 1              | 2021-03-10T14:35:45.257Z | 1.06m        | 2021-03-10T14:35:48.783Z | 2021-03-10T14:35:51.118Z | 5         |
 4  | 1              | 2021-03-10T14:37:45.257Z | 1.06m        | 2021-03-10T14:37:48.716Z | 2021-03-10T14:37:51.532Z | 0         |
(4 rows)
</pre></div>
</div>
</section>
<section id="add-redirection">
<h3 id="add-redirection">Add redirection<a class="headerlink" href="#add-redirection" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">cache</span></code> command adds caching of a given source table into the target
catalog and schema. The cache service automatically generates a name for the
target table with a random suffix. The cached table is bulk loaded from the
specified source table. Incrementally loaded cached tables can be defined only
through a <a class="reference internal" href="table-scan-redirection.html#table-scan-redirection-rule-sets"><span class="std std-ref">JSON file</span></a>. The cached table is
used to redirect table scans on source tables for a time interval specified by
the <code class="docutils literal notranslate"><span class="pre">--cache-ttl</span></code> option:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli cache --source=mysql.test.nation_tmp --target-catalog=hive --target-schema=cache --cache-ttl=1h
</pre></div>
</div>
<p>The output shows the target table as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> catalog_name | schema_name |                   table_name
--------------+-------------+-------------------------------------------------
 hive         | cache       | nation_tmp_9be03071_e197_4a8e_8e4e_46a44a32096b
</pre></div>
</div>
<p>The grace period is 15m by default. It can be extended using the
<code class="docutils literal notranslate"><span class="pre">--grace-period</span></code> option based on the maximum duration that the queries are
expected to run.</p>
<table id="id2">
<caption><span class="caption-text">Optional cache command options</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">allow-multiple-imports</span></code></p></td>
<td><p>Allow parallel imports for the same source table. By default another
command does not start another import, if one is already running for the
same source table. This is useful to force another import, for example
when an existing import seems to be stalled.</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">grace-period</span></code></p></td>
<td><p>The service removes cached tables when they are no longer needed, such as
when a newer redirection is present or ttl expired. The service waits for
<code class="docutils literal notranslate"><span class="pre">grace-period</span></code> before removing the cached table. This allows any running
queries which started just before the cached table is expired to finish
gracefully.</p></td>
<td><p>15m</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max-import-duration</span></code></p></td>
<td><p>Maximum allowed execution time for cached table import job</p></td>
<td><p>30m</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">columns</span></code></p></td>
<td><p>Comma separated list of columns to be cached from source table.
All columns are cached by default.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">partition-columns</span></code></p></td>
<td><p>Comma separated list of columns for partitioning the data in the target
table</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bucket-columns</span></code></p></td>
<td><p>Comma separated list of columns for bucketing the data in the target
table (requires bucket count)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bucket-count</span></code></p></td>
<td><p>Number of buckets in target table when bucket columns are specified</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sort-columns</span></code></p></td>
<td><p>Comma separated list of columns for sorting the data in the target
table (requires table bucketing)</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="incremental-import">
<h3 id="incremental-import">Incremental import<a class="headerlink" href="#incremental-import" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">incremental_import</span></code> command schedules an incremental import for the
redirection corresponding to a given identifier. The redirection selected for
incremental import must be configured for incremental imports through a
<a class="reference internal" href="table-scan-redirection.html#table-scan-redirection-rule-sets"><span class="std std-ref">JSON file</span></a>. The cached table is used to
redirect table scans on a source table for a time interval specified by the
<code class="docutils literal notranslate"><span class="pre">--freshness-duration</span></code> option:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli incremental_import --id=1 --freshness-duration=1h
</pre></div>
</div>
<p>The output shows the import id if the import is successfully scheduled:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Incremental import id (3)
</pre></div>
</div>
<table id="id3">
<caption><span class="caption-text">Optional <code class="docutils literal notranslate"><span class="pre">incremental_import</span></code> command options</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 30%"/>
<col style="width: 60%"/>
<col style="width: 10%"/>
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max-import-duration</span></code></p></td>
<td><p>Maximum allowed execution time for a cached table import job</p></td>
<td><p>30m</p></td>
</tr>
</tbody>
</table>
</section>
<section id="expire-redirections">
<h3 id="expire-redirections">Expire redirections<a class="headerlink" href="#expire-redirections" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">expire_redirection</span></code> command expires the redirection corresponding
to a given identifier. The redirection grace period is still honored. Therefore
queries that use cached tables do not fail. The column <code class="docutils literal notranslate"><span class="pre">id</span></code> from the output of
<code class="docutils literal notranslate"><span class="pre">list_redirections</span></code> or <code class="docutils literal notranslate"><span class="pre">current_redirection</span></code> commands can be used to
identify a redirection for expiry.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>cache-cli expire_redirection --id 1
</pre></div>
</div>
<p>The output is either <code class="docutils literal notranslate"><span class="pre">Success</span></code> or an error message containing the reason
for failure.</p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>

  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="cache-service.html" title="Cache service"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Cache service </span>
              </div>
            </a>
          
          
            <a href="atlas-integration.html" title="Atlas integration"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Atlas integration </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
<!-- custom footer should go here in time -->
<div class="page-footer">
</div>
<script src="../_static/algolia.js"></script>
<script src="../_static/searchbox.js"></script>
<script src="../_static/searchresults.js"></script>
  </body>
</html>